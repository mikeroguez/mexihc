import{_ as L,u as V,m as $,n as P,c as l,b as o,t as n,F as p,p as R,e as m,d as C,w as _,h as H,k as D,R as A,q as c,v as E,o as s,a as U}from"./index-BUmGwuoG.js";const j={key:0,class:"in-page-nav-links","aria-label":"In-page navigation"},F={class:"in-page-nav-title"},z={class:"in-page-nav-list"},O={class:"in-page-nav-index"},q={key:1,class:"next-date-widget","aria-live":"polite"},W={class:"in-page-nav-title"},Y={class:"next-date-name mb-1"},G={class:"next-date-value mb-2"},J={class:"next-date-relative mb-0"},K={key:0,class:"next-date-following mt-3 mb-0"},Q={key:1,class:"next-date-ended mb-0"},X=["aria-label","title"],Z={class:"visually-hidden"},ee={__name:"InPageNavigationPanel",props:{links:{type:Array,default:()=>[]},milestones:{type:Array,default:()=>[]},allDatesTo:{type:[String,Object],default:null},allDatesLabel:{type:String,default:""}},setup(i){const S=i,{locale:y}=V(),k=E(!1),h=E(null),T={es:{linksTitle:"En esta página",widgetTitle:"Próxima fecha clave",nextStage:"Siguiente etapa",conferenceEnded:"La conferencia ya finalizó.",noUpcoming:"No hay más fechas pendientes.",today:"Hoy",inDays:e=>`En ${e} días`,tomorrow:"Mañana",defaultAllDates:"Ver todas las fechas importantes",backToAnchors:"Volver al menú de secciones",backToAnchorsShort:"Menú"},en:{linksTitle:"On this page",widgetTitle:"Next key date",nextStage:"Following stage",conferenceEnded:"The conference has ended.",noUpcoming:"There are no upcoming dates.",today:"Today",inDays:e=>`In ${e} days`,tomorrow:"Tomorrow",defaultAllDates:"See all important dates",backToAnchors:"Back to sections menu",backToAnchorsShort:"Menu"},pt:{linksTitle:"Nesta página",widgetTitle:"Próxima data-chave",nextStage:"Etapa seguinte",conferenceEnded:"A conferência já terminou.",noUpcoming:"Não há mais datas pendentes.",today:"Hoje",inDays:e=>`Em ${e} dias`,tomorrow:"Amanhã",defaultAllDates:"Veja todas as datas importantes",backToAnchors:"Voltar ao menu de seções",backToAnchorsShort:"Menu"}},t=c(()=>T[y.value]||T.en),d=c(()=>S.milestones.map((e,a)=>{const r=Date.parse(`${e.date}T00:00:00`);return Number.isNaN(r)?null:{...e,index:a,ts:r}}).filter(Boolean).sort((e,a)=>e.ts-a.ts||e.index-a.index)),w=c(()=>{const e=new Date;return e.setHours(0,0,0,0),e.getTime()}),u=c(()=>d.value.find(e=>e.ts>=w.value)||null),b=c(()=>{if(!u.value)return null;const e=d.value.findIndex(a=>a===u.value);return d.value[e+1]||null}),x=c(()=>d.value.find(a=>a.kind==="conference-end")||d.value[d.value.length-1]||null),N=c(()=>x.value?x.value.ts<w.value:!1),f=c(()=>d.value.length>0),M=e=>{const a=new Date(`${e}T12:00:00`);return new Intl.DateTimeFormat(y.value,{year:"numeric",month:"long",day:"numeric"}).format(a)},I=e=>{const a=new Date(`${e}T00:00:00`),r=new Date;a.setHours(0,0,0,0),r.setHours(0,0,0,0);const v=Math.round((a.getTime()-r.getTime())/864e5);return v<=0?t.value.today:v===1?t.value.tomorrow:t.value.inDays(v)},g=()=>{k.value=window.scrollY>380},B=()=>{const a=window.matchMedia("(prefers-reduced-motion: reduce)").matches?"auto":"smooth";if(h.value){h.value.scrollIntoView({behavior:a,block:"start"});return}window.scrollTo({top:0,behavior:a})};return $(()=>{g(),window.addEventListener("scroll",g,{passive:!0})}),P(()=>{window.removeEventListener("scroll",g)}),(e,a)=>(s(),l(p,null,[i.links.length||f.value?(s(),l("section",{key:0,ref_key:"panelRef",ref:h,class:"in-page-nav my-3"},[i.links.length?(s(),l("nav",j,[o("h2",F,n(t.value.linksTitle),1),o("ol",z,[(s(!0),l(p,null,R(i.links,(r,v)=>(s(),l("li",{key:`${v}-${r.label}`,class:"in-page-nav-item"},[U(D(A),{to:r.to,class:"in-page-nav-link"},{default:_(()=>[o("span",O,n(v+1),1),o("span",null,n(r.label),1)]),_:2},1032,["to"])]))),128))])])):m("",!0),f.value?(s(),l("aside",q,[o("h2",W,n(t.value.widgetTitle),1),u.value?(s(),l(p,{key:0},[o("p",Y,n(u.value.label),1),o("p",G,n(M(u.value.date)),1),o("p",J,n(I(u.value.date)),1),b.value?(s(),l("p",K,n(t.value.nextStage)+": "+n(b.value.label),1)):m("",!0)],64)):(s(),l("p",Q,n(N.value?t.value.conferenceEnded:t.value.noUpcoming),1)),i.allDatesTo?(s(),C(D(A),{key:2,to:i.allDatesTo,class:"next-date-all-dates"},{default:_(()=>[H(n(i.allDatesLabel||t.value.defaultAllDates),1)]),_:1},8,["to"])):m("",!0)])):m("",!0)],512)):m("",!0),k.value&&(i.links.length||f.value)?(s(),l("button",{key:1,type:"button",class:"anchors-float-btn","aria-label":t.value.backToAnchors,title:t.value.backToAnchors,onClick:B},[a[0]||(a[0]=o("span",{class:"anchors-float-symbol","aria-hidden":"true"},"@",-1)),a[1]||(a[1]=o("span",{class:"anchors-float-arrow","aria-hidden":"true"},"↑",-1)),o("span",Z,n(t.value.backToAnchorsShort),1)],8,X)):m("",!0)],64))}},te=L(ee,[["__scopeId","data-v-567b6231"]]);export{te as I};

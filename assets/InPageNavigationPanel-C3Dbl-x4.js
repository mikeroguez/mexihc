import{_ as V,u as $,m as M,n as P,c as s,b as i,t as n,F as p,p as C,e as m,d as H,w as _,h as U,k as D,R as A,q as c,v as E,o as l,a as j}from"./index-5nApBH4p.js";const F={key:0,class:"in-page-nav-links","aria-label":"In-page navigation"},R={class:"in-page-nav-title"},z={class:"in-page-nav-list"},O={class:"in-page-nav-index"},q={key:1,class:"next-date-widget","aria-live":"polite"},W={class:"in-page-nav-title"},Y={class:"next-date-name mb-1"},G={class:"next-date-value mb-2"},J={class:"next-date-relative mb-0"},K={key:0,class:"next-date-following mt-3 mb-0"},Q={key:1,class:"next-date-ended mb-0"},X=["aria-label","title"],Z={__name:"InPageNavigationPanel",props:{links:{type:Array,default:()=>[]},milestones:{type:Array,default:()=>[]},allDatesTo:{type:[String,Object],default:null},allDatesLabel:{type:String,default:""}},setup(r){const N=r,{locale:y}=$(),k=E(!1),f=E(null),T={es:{linksTitle:"En esta página",widgetTitle:"Próxima fecha clave",nextStage:"Siguiente etapa",conferenceEnded:"La conferencia ya finalizó.",noUpcoming:"No hay más fechas pendientes.",today:"Hoy",inDays:e=>`En ${e} días`,tomorrow:"Mañana",defaultAllDates:"Ver todas las fechas importantes",backToAnchors:"Volver al menú de secciones"},en:{linksTitle:"On this page",widgetTitle:"Next key date",nextStage:"Following stage",conferenceEnded:"The conference has ended.",noUpcoming:"There are no upcoming dates.",today:"Today",inDays:e=>`In ${e} days`,tomorrow:"Tomorrow",defaultAllDates:"See all important dates",backToAnchors:"Back to sections menu"},pt:{linksTitle:"Nesta página",widgetTitle:"Próxima data-chave",nextStage:"Etapa seguinte",conferenceEnded:"A conferência já terminou.",noUpcoming:"Não há mais datas pendentes.",today:"Hoje",inDays:e=>`Em ${e} dias`,tomorrow:"Amanhã",defaultAllDates:"Veja todas as datas importantes",backToAnchors:"Voltar ao menu de seções"}},t=c(()=>T[y.value]||T.en),d=c(()=>N.milestones.map((e,a)=>{const o=Date.parse(`${e.date}T00:00:00`);return Number.isNaN(o)?null:{...e,index:a,ts:o}}).filter(Boolean).sort((e,a)=>e.ts-a.ts||e.index-a.index)),w=c(()=>{const e=new Date;return e.setHours(0,0,0,0),e.getTime()}),u=c(()=>d.value.find(e=>e.ts>=w.value)||null),b=c(()=>{if(!u.value)return null;const e=d.value.findIndex(a=>a===u.value);return d.value[e+1]||null}),x=c(()=>d.value.find(a=>a.kind==="conference-end")||d.value[d.value.length-1]||null),I=c(()=>x.value?x.value.ts<w.value:!1),g=c(()=>d.value.length>0),S=e=>{const a=new Date(`${e}T12:00:00`);return new Intl.DateTimeFormat(y.value,{year:"numeric",month:"long",day:"numeric"}).format(a)},B=e=>{const a=new Date(`${e}T00:00:00`),o=new Date;a.setHours(0,0,0,0),o.setHours(0,0,0,0);const v=Math.round((a.getTime()-o.getTime())/864e5);return v<=0?t.value.today:v===1?t.value.tomorrow:t.value.inDays(v)},h=()=>{k.value=window.scrollY>380},L=()=>{if(f.value){f.value.scrollIntoView({behavior:"smooth",block:"start"});return}window.scrollTo({top:0,behavior:"smooth"})};return M(()=>{h(),window.addEventListener("scroll",h,{passive:!0})}),P(()=>{window.removeEventListener("scroll",h)}),(e,a)=>(l(),s(p,null,[r.links.length||g.value?(l(),s("section",{key:0,ref_key:"panelRef",ref:f,class:"in-page-nav my-3"},[r.links.length?(l(),s("nav",F,[i("h2",R,n(t.value.linksTitle),1),i("ol",z,[(l(!0),s(p,null,C(r.links,(o,v)=>(l(),s("li",{key:`${v}-${o.label}`,class:"in-page-nav-item"},[j(D(A),{to:o.to,class:"in-page-nav-link"},{default:_(()=>[i("span",O,n(v+1),1),i("span",null,n(o.label),1)]),_:2},1032,["to"])]))),128))])])):m("",!0),g.value?(l(),s("aside",q,[i("h2",W,n(t.value.widgetTitle),1),u.value?(l(),s(p,{key:0},[i("p",Y,n(u.value.label),1),i("p",G,n(S(u.value.date)),1),i("p",J,n(B(u.value.date)),1),b.value?(l(),s("p",K,n(t.value.nextStage)+": "+n(b.value.label),1)):m("",!0)],64)):(l(),s("p",Q,n(I.value?t.value.conferenceEnded:t.value.noUpcoming),1)),r.allDatesTo?(l(),H(D(A),{key:2,to:r.allDatesTo,class:"next-date-all-dates"},{default:_(()=>[U(n(r.allDatesLabel||t.value.defaultAllDates),1)]),_:1},8,["to"])):m("",!0)])):m("",!0)],512)):m("",!0),k.value&&(r.links.length||g.value)?(l(),s("button",{key:1,type:"button",class:"anchors-float-btn","aria-label":t.value.backToAnchors,title:t.value.backToAnchors,onClick:L},[...a[0]||(a[0]=[i("span",{"aria-hidden":"true"},"↟",-1)])],8,X)):m("",!0)],64))}},ae=V(Z,[["__scopeId","data-v-d9497f00"]]);export{ae as I};

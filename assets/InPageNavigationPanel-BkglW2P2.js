import{_ as V,u as $,m as C,n as H,c as r,b as s,t as o,F as p,p as P,e as h,d as U,w as _,h as j,k as D,R as A,q as c,v as E,o as l,a as F}from"./index-DruD2WCd.js";const Y={key:0,class:"in-page-nav-links","aria-label":"In-page navigation"},q={class:"in-page-nav-title"},z={class:"in-page-nav-list"},G={class:"in-page-nav-index"},O={key:1,class:"next-date-widget","aria-live":"polite"},W={class:"in-page-nav-title"},J={class:"next-date-name mb-1"},K={class:"next-date-value mb-2"},Q={class:"next-date-relative mb-0"},X={key:0,class:"next-date-following mt-3 mb-0"},Z={key:1,class:"next-date-ended mb-0"},ee=["aria-label","title"],te={class:"visually-hidden"},ae={__name:"InPageNavigationPanel",props:{links:{type:Array,default:()=>[]},milestones:{type:Array,default:()=>[]},allDatesTo:{type:[String,Object],default:null},allDatesLabel:{type:String,default:""}},setup(i){const S=i,{locale:y}=$(),k=E(!1),m=E(null),w={es:{linksTitle:"En esta página",widgetTitle:"Próxima fecha clave",nextStage:"Siguiente etapa",conferenceEnded:"La conferencia ya finalizó.",noUpcoming:"No hay más fechas pendientes.",today:"Hoy",inDays:e=>`En ${e} días`,tomorrow:"Mañana",defaultAllDates:"Ver todas las fechas importantes",backToAnchors:"Volver al menú de secciones",backToAnchorsShort:"Menú"},en:{linksTitle:"On this page",widgetTitle:"Next key date",nextStage:"Following stage",conferenceEnded:"The conference has ended.",noUpcoming:"There are no upcoming dates.",today:"Today",inDays:e=>`In ${e} days`,tomorrow:"Tomorrow",defaultAllDates:"See all important dates",backToAnchors:"Back to sections menu",backToAnchorsShort:"Menu"},pt:{linksTitle:"Nesta página",widgetTitle:"Próxima data-chave",nextStage:"Etapa seguinte",conferenceEnded:"A conferência já terminou.",noUpcoming:"Não há mais datas pendentes.",today:"Hoje",inDays:e=>`Em ${e} dias`,tomorrow:"Amanhã",defaultAllDates:"Veja todas as datas importantes",backToAnchors:"Voltar ao menu de seções",backToAnchorsShort:"Menu"}},a=c(()=>w[y.value]||w.en),d=c(()=>S.milestones.map((e,t)=>{const n=Date.parse(`${e.date}T00:00:00`);return Number.isNaN(n)?null:{...e,index:t,ts:n}}).filter(Boolean).sort((e,t)=>e.ts-t.ts||e.index-t.index)),T=c(()=>{const e=new Date;return e.setHours(0,0,0,0),e.getTime()}),v=c(()=>d.value.find(e=>e.ts>=T.value)||null),b=c(()=>{if(!v.value)return null;const e=d.value.findIndex(t=>t===v.value);return d.value[e+1]||null}),x=c(()=>d.value.find(t=>t.kind==="conference-end")||d.value[d.value.length-1]||null),M=c(()=>x.value?x.value.ts<T.value:!1),f=c(()=>d.value.length>0),N=e=>{const t=new Date(`${e}T12:00:00`);return new Intl.DateTimeFormat(y.value,{year:"numeric",month:"long",day:"numeric"}).format(t)},B=e=>{const t=new Date(`${e}T00:00:00`),n=new Date;t.setHours(0,0,0,0),n.setHours(0,0,0,0);const u=Math.round((t.getTime()-n.getTime())/864e5);return u<=0?a.value.today:u===1?a.value.tomorrow:a.value.inDays(u)},g=()=>{k.value=window.scrollY>380},I=()=>{const t=window.matchMedia("(prefers-reduced-motion: reduce)").matches?"auto":"smooth",n=document.querySelector(".mexihc-navbar"),L=(n?n.getBoundingClientRect().height:0)+12;if(m.value){const R=window.scrollY+m.value.getBoundingClientRect().top-L;window.scrollTo({top:Math.max(0,R),behavior:t});return}window.scrollTo({top:0,behavior:t})};return C(()=>{g(),window.addEventListener("scroll",g,{passive:!0})}),H(()=>{window.removeEventListener("scroll",g)}),(e,t)=>(l(),r(p,null,[i.links.length||f.value?(l(),r("section",{key:0,ref_key:"panelRef",ref:m,class:"in-page-nav my-3"},[i.links.length?(l(),r("nav",Y,[s("h2",q,o(a.value.linksTitle),1),s("ol",z,[(l(!0),r(p,null,P(i.links,(n,u)=>(l(),r("li",{key:`${u}-${n.label}`,class:"in-page-nav-item"},[F(D(A),{to:n.to,class:"in-page-nav-link"},{default:_(()=>[s("span",G,o(u+1),1),s("span",null,o(n.label),1)]),_:2},1032,["to"])]))),128))])])):h("",!0),f.value?(l(),r("aside",O,[s("h2",W,o(a.value.widgetTitle),1),v.value?(l(),r(p,{key:0},[s("p",J,o(v.value.label),1),s("p",K,o(N(v.value.date)),1),s("p",Q,o(B(v.value.date)),1),b.value?(l(),r("p",X,o(a.value.nextStage)+": "+o(b.value.label),1)):h("",!0)],64)):(l(),r("p",Z,o(M.value?a.value.conferenceEnded:a.value.noUpcoming),1)),i.allDatesTo?(l(),U(D(A),{key:2,to:i.allDatesTo,class:"next-date-all-dates uline"},{default:_(()=>[j(o(i.allDatesLabel||a.value.defaultAllDates),1)]),_:1},8,["to"])):h("",!0)])):h("",!0)],512)):h("",!0),k.value&&(i.links.length||f.value)?(l(),r("button",{key:1,type:"button",class:"anchors-float-btn","aria-label":a.value.backToAnchors,title:a.value.backToAnchors,onClick:I},[t[0]||(t[0]=s("span",{class:"anchors-float-symbol","aria-hidden":"true"},"@",-1)),t[1]||(t[1]=s("span",{class:"anchors-float-arrow","aria-hidden":"true"},"↑",-1)),s("span",te,o(a.value.backToAnchorsShort),1)],8,ee)):h("",!0)],64))}},se=V(ae,[["__scopeId","data-v-9725a866"]]);export{se as I};
